---

copyright:
years: 2021
lastupdated: "2021-02-20"
 
---

{:new_window: target="blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:pre: .pre}
{:child: .link .ulchildlink}
{:childlinks: .ullinks}

# セキュリティーおよびプライバシー
{: #security_privacy}

{{site.data.keyword.edge_notm}} ({{site.data.keyword.ieam}}) は、[Open Horizon](https://github.com/open-horizon) に基づいており、複数の異なるセキュリティー・テクノロジーを使用して、攻撃から保護された状態を保ち、プライバシーを保護しています。 {{site.data.keyword.ieam}} は、地理的に分散した自律的なエージェント・プロセスを利用して、エッジ・ソフトウェアを管理します。 結果として、{{site.data.keyword.ieam}} 管理ハブとエージェントの両方がセキュリティー・ブリーチの潜在的な標的になります。 この資料では、{{site.data.keyword.ieam}} がどのように脅威を緩和または除去しているのかについて説明します。
{:shortdesc}

## 管理ハブ
{{site.data.keyword.ieam}} 管理ハブは、OpenShift Container Platform にデプロイされるため、すべての固有のセキュリティー・メカニズムの利点を継承しています。 すべての {{site.data.keyword.ieam}} 管理ハブのネットワーク・トラフィックは、TLS で保護されたエントリー・ポイントをトラバースします。 {{site.data.keyword.ieam}} 管理ハブ・コンポーネント間の管理ハブ・ネットワーク通信は、TLS なしで実行されます。

## セキュア・コントロール・プレーン
{: #dc_pane}

{{site.data.keyword.ieam}} 管理ハブおよび分散エージェントは、コントロール・プレーンを介して通信して、ワークロードおよびモデルをエッジ・ノードにデプロイします。 標準的な集中型のモノのインターネット (IoT) プラットフォームおよびクラウド・ベースの制御システムとは対照的に、{{site.data.keyword.ieam}} コントロール・プレーンはほとんど非集中型です。 システム内の各アクターには、制限された範囲の権限が付与されるため、各アクターが備える権限は、そのタスクの実行に必要な最小レベルのみです。 システム全体を制御できるアクターはありません。 さらに、単一のエッジ・ノード、ホスト、またはソフトウェア・コンポーネントを侵害することで、システム内のすべてのエッジ・ノードに対するアクセス権限を取得できるアクターもありません。

コントロール・プレーンは、以下の 3 つの異なるソフトウェア・エンティティーによって実装されます。
* Open {{site.data.keyword.horizon}} エージェント
* Open {{site.data.keyword.horizon}} agbot
* Open {{site.data.keyword.horizon_exchange}}

Open {{site.data.keyword.horizon}} エージェントおよび agbot は、コントロール・プレーン内のプライマリー・アクターです。 {{site.data.keyword.horizon_exchange}} は、エージェントおよび agbot 間のディスカバリーおよびセキュアな通信を支援します。 双方が組み合わせって、Perfect Forward Secrecy と呼ばれるアルゴリズムを使用してメッセージ・レベルの保護を提供します。

デフォルトでは、エージェントおよび agbot は TLS 1.3 を介して Exchange と通信します。 ただし、TLS 自体は十分なセキュリティーを提供しません。 {{site.data.keyword.ieam}} は、エージェントおよび agbot 間でフローするすべてのコントロール・メッセージを暗号化してから、ネットワークを介して送信されるようにします。 各エージェントおよび agbot は 2048 ビットの RSA 鍵ペアを生成し、Exchange で公開鍵を公開します。 シークレット鍵は、各アクターのルート保護ストレージに保管されます。 システム内の他のアクターは、メッセージ受信側の公開鍵を使用して、コントロール・プレーンのメッセージの暗号化に使用された対称鍵を暗号化します。 これにより、意図された受信側のみが対称鍵 (それゆえ、メッセージ自体) を復号できるようになります。 コントロール・プレーンで Perfect Forward Secrecy が使用されているため、TLS では防止されない中間者攻撃の防止など、セキュリティーが高まります。

### エージェント
{: #agents}

{{site.data.keyword.horizon_open}} エージェントは、{{site.data.keyword.ieam}} 内のすべてのアクターで最も数の多いエンティティーです。 エージェントは、各管理対象エッジ・ノードで実行されます。 各エージェントは、そのエッジ・ノードのみを管理する権限を持ちます。 エージェントが侵害されても、そのエージェントは、他のエッジ・ノードやシステムの他のコンポーネントに影響を及ぼす権限を備えていません。 各ノードには、固有の資格情報があり、独自のルート保護ストレージに保管されています。 {{site.data.keyword.horizon_exchange}} により、ノードがアクセスできるのは、自身のリソースのみになります。 `hzn register` コマンドを使用してノードが登録されると、認証トークンを提供できます。 ただし、ベスト・プラクティスとして、ノード資格情報を認識できるユーザーがないようにするために、エージェントが独自のトークンを生成できるようにします。これにより、エッジ・ノード侵害の可能性が低くなります。

エージェントは、ホスト・ネットワーク上に listen ポートを持たないため、ネットワーク攻撃から保護されています。 エージェントと管理ハブ間のすべての通信は、エージェントが管理ハブにポーリングすることによって行われます。 さらに、ノードのホストへの侵入を防止するネットワーク・ファイアウォールを使用してエッジ・ノードを保護することを強くお勧めします。 これらの保護にもかかわらず、エージェントのホスト・オペレーティング・システムまたはエージェント・プロセス自体がハッキングされるなどして侵害されても、影響を受けるのはそのエッジ・ノードのみです。 {{site.data.keyword.ieam}} システムの他のどの部分も影響を受けません。

エージェントは、コンテナー化ワークロードのダウンロードおよび開始を担当します。 ダウンロードされたコンテナー・イメージおよびその構成が侵害されていないことを確認するために、エージェントはコンテナー・イメージのデジタル署名およびデプロイメント構成のデジタル署名を検証します。 コンテナーがコンテナー・レジストリーに保管されている場合、レジストリーはイメージのデジタル署名 (例えば、SHA256 ハッシュ) を提供します。 コンテナー・レジストリーは、署名の作成に使用される鍵を管理します。 {{site.data.keyword.ieam}} サービスは、`hzn exchange service publish` コマンドを使用して公開されると、イメージの署名を取得し、{{site.data.keyword.horizon_exchange}} 内に公開されたサービスとともに保管します。 イメージのデジタル署名は、セキュア・コントロール・プレーンを介してエージェントに渡されます。これにより、エージェントは、ダウンロードされたイメージに対してコンテナー・イメージの署名を検証できます。 イメージの署名がイメージに一致していない場合、エージェントはコンテナーを開始しません。 コンテナー構成のプロセスも類似していますが、1 つ例外があります。 `hzn exchange service publish` コマンドは、コンテナー構成に署名し、{{site.data.keyword.horizon_exchange}} にその署名を保管します。 この場合、(サービスを公開する) ユーザーは、署名の作成に使用された RSA 鍵ペアを指定する必要があります。 ユーザーにまだ鍵がない場合は、`hzn key create` コマンドを使用して、このための鍵を生成できます。 公開鍵は、コンテナー構成の署名とともに Exchange に保管され、セキュア・コントロール・プレーンを介してエージェントに渡されます。 これにより、エージェントは、公開鍵を使用して、コンテナー構成を検証できます。 コンテナー構成ごとに異なる鍵ペアを使用する場合は、このコンテナー構成に署名するために使用した秘密鍵は、もう必要なくなったため、この時点で破棄できます。 ワークロードの公開について詳しくは、『[エッジ・サービスの開発](../developing/developing_edge_services.md)』を参照してください。

モデルがエッジ・ノードにデプロイされると、エージェントはモデルをダウンロードし、モデルの署名を検証してモデルが転送中に改ざんされていないことを確認します。署名と検証鍵は、モデルが管理ハブに公開される際に作成されます。エージェントは、ホスト上の root 保護ストレージにモデルを保管します。エージェントによって開始されたときに、資格情報が各サービスに提供されます。 サービスはその資格情報を使用して自身を証明し、サービスがアクセスできるモデルにアクセスできるようにします。 {{site.data.keyword.ieam}} 内の各モデル・オブジェクトは、モデルにアクセスできるサービスのリストを示します。 各サービスは、{{site.data.keyword.ieam}} によって再始動されるたびに新しい資格情報を取得します。 モデル・オブジェクトは、{{site.data.keyword.ieam}} によって暗号化されません。 モデル・オブジェクトは {{site.data.keyword.ieam}} によってビット・バッグとして扱われるため、必要であれば、サービス実装でモデルを暗号化できます。 MMS の使用方法について詳しくは、『[モデル管理の詳細](../developing/model_management_details.md)』を参照してください。

### agbot
{: #agbots}

{{site.data.keyword.ieam}} 管理ハブには、agbot の複数のインスタンスが含まれています。これらのインスタンスは、管理ハブに登録されているすべてのエッジ・ノードへのワークロードのデプロイメントを開始する処理を行います。 agbot は、Exchange に公開されたすべてのデプロイメント・ポリシーおよびパターンを定期的に確認し、該当するパターンおよびポリシーのサービスがすべての正しいエッジ・ノードにデプロイされるようにします。 agbot は、デプロイメント要求を開始すると、セキュア・コントロール・プレーンを介して要求を送信します。 デプロイメント要求には、エージェントが要求の受け入れを決定した場合に、ワークロードおよびその構成を検証するためにエージェントで必要になるすべてのものが含まれています。 エージェントの処理に関するセキュリティーの詳細については、『[エージェント](security_privacy.md#agents)』を参照してください。 agbot は、モデルをどこにいつデプロイするのかを MMS に指示する処理も行います。 モデルがどのように管理されるかに関するセキュリティーの詳細については、『[ エージェント](security_privacy.md#agents)』を参照してください。

侵害された agbot は、悪意のあるワークロードのデプロイメントを提案しようとする可能性がありますが、提案されたデプロイメントは、エージェント・セクションで記述されているセキュリティー要件を満たす必要があります。 agbot は、ワークロードのデプロイメントを開始した場合でも、ワークロードおよびコンテナーの構成を作成する権限を持たないため、独自の悪意のあるワークロードを提案することはできません。

## {{site.data.keyword.horizon_exchange}}
{: #exchange}

{{site.data.keyword.horizon_exchange}} は中央集中型の複製され、ロード・バランシングされた REST API サーバーです。 ユーザー、組織、エッジ・ノード、および公開されているサービス、ポリシー、およびパターンのメタデータの共有データベースとして機能します。 また、メッセージを取得できるようになるまで、セキュア・コントロール・プレーンのストレージを提供することで、分散エージェントおよび agbot がコンテナー化ワークロードをデプロイできるようにします。 {{site.data.keyword.horizon_exchange}} は、コントロール・メッセージを読み取ることができません。メッセージを復号するための秘密 RSA 鍵を所有していないためです。 そのため、侵害された {{site.data.keyword.horizon_exchange}} は、コントロール・プレーンのトラフィックを傍受できません。 Exchange の役割について詳しくは、『[{{site.data.keyword.edge}} の概要](../getting_started/overview_ieam.md)』を参照してください。

## 特権モードのサービス
{: #priv_services}
ホスト・マシンでは、一部のタスクは root アクセス権限を持つアカウントのみが実行できます。コンテナーでそれに相当するものは特権モードです。通常、コンテナーはホストで特権モードを必要としませんが、特権モードが必要なユース・ケースはいくつか存在します。{{site.data.keyword.ieam}} では、特権プロセス実行が有効になった状態でアプリケーション・サービスをデプロイする必要があることを指定できます。デフォルトでは特権プロセス実行は無効になっています。特権モードで実行する必要があるサービスごとに、個別のサービス定義ファイルの[デプロイメント構成](https://open-horizon.github.io/anax/deployment_string.html)で、明示的に特権モードを有効にする必要があります。さらに、そのサービスをデプロイする任意のノードでも、特権モードのコンテナーを明示的に許可する必要があります。これらの操作によって、ノード所有者はそのエッジ・ノードで実行するサービスについて確実に制御することができます。エッジ・ノードで特権モード・ポリシーを有効にする方法の例は、[特権ノードのポリシー](https://github.com/open-horizon/anax/blob/master/cli/samples/privileged_node_policy.json)を参照してください。サービス定義またはその依存関係のいずれかに特権モードが必要な場合、ノード・ポリシーでも特権モードを許可する必要があります。そうしないと、どのサービスもノードにデプロイされません。特権モードについての詳細は、[What is privileged mode and do I need it?](https://wiki.lfedge.org/pages/viewpage.action?pageId=44171856) を参照してください。

## サービス妨害攻撃
{: #denial}

{{site.data.keyword.ieam}} 管理ハブは、中央集中型サービスです。 標準的なクラウド・ベース環境における中央集中型サービスは、通常、サービス妨害攻撃に対して脆弱です。 エージェントで接続が必要になるのは、最初にハブに登録されるとき、またはワークロードのデプロイメントをネゴシエーションするときのみです。 他のすべてのときには、エージェントは、{{site.data.keyword.ieam}} 管理ハブから切断されている間でも、正常に動作し続けます。  これにより、管理ハブが攻撃されている場合でも、{{site.data.keyword.ieam}} エージェントはエッジ・ノードでアクティブなままでいられます。

## モデル管理システム
{: #malware}

{{site.data.keyword.ieam}} は、MMS にアップロードされたデータに対してマルウェア・スキャンもウィルス・スキャンも実行しません。 MMS にアップロードされるデータが、アップロードされる前にスキャンされていることを確認してください。

## Data at REST (保存されたデータ)
{: #drest}

{{site.data.keyword.ieam}} は、Data at Rest を暗号化しません。 Data at Rest の暗号化は、{{site.data.keyword.ieam}} 管理ハブまたはエージェントが実行されているホスト・オペレーティング・システムに適切なユーティリティーを使用して実装する必要があります。

## セキュリティー標準
{: #standards}

{{site.data.keyword.ieam}} 内では、以下のセキュリティー標準が使用されています。
* TLS 1.2 (HTTPS)。管理ハブとの間での転送中データの暗号化に使用されています。
* AES 256 ビット暗号化。転送中データ (特に、セキュア・コントロール・プレーンを介してフローするメッセージ) に対して使用されています。
* 2048 RSA 鍵ペア。転送中データ (特に、セキュア・コントロール・プレーンを介してフローする AES 256 対称鍵) に対して使用されています。
* **hzn exchange service publish** コマンドを使用する際にコンテナー・デプロイメント構成に署名するために、ユーザーによって提供された RSA 鍵。
* **hzn key create** コマンドで生成された RSA 鍵ペア (ユーザーがこのコマンドを使用することを選択した場合)。 この鍵のビット・サイズはデフォルトでは 4096 ですが、ユーザーが変更できます。

## 要約
{: #summary}

{{site.data.keyword.edge_notm}} はハッシュ、暗号署名、暗号化を使用して、不要なアクセスに対するセキュリティーを確保しています。 {{site.data.keyword.ieam}} は大部分が非集中化されているため、エッジコンピューティング環境でよく見られるほとんどの攻撃にさらされることがありません。 参加している役割の権限の範囲を制限することで、{{site.data.keyword.ieam}} は、侵害されたホストや侵害されたソフトウェア・コンポーネントからシステムの当該部分に及ぶ可能性がある損害を阻止します。 {{site.data.keyword.ieam}} で使用されている {{site.data.keyword.horizon}} サービスの中央集中型サービスに対する大規模な外部攻撃が生じた場合でも、エッジでのワークロードの実行への影響は最小限に抑えられます。
